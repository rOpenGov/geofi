<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Geocode Finnish Place Names or Street Addresses — geocode • geofi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geocode Finnish Place Names or Street Addresses — geocode"><meta name="description" content="Geocodes Finnish place names or street addresses using the National Land Survey
of Finland (NLS) geocoding REST API. This function converts textual location
descriptions into spatial coordinates."><meta property="og:description" content="Geocodes Finnish place names or street addresses using the National Land Survey
of Finland (NLS) geocoding REST API. This function converts textual location
descriptions into spatial coordinates."><meta property="og:image" content="https://ropengov.github.io/geofi/logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenGov"><meta name="twitter:site" content="@rOpenGov"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geofi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/geofi_datasets.html">Datasets in geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_geocoding.html">Geocoding and Reverse Geocoding with the geofi Package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_joining_attribute_data.html">Joining attribute data with geofi data</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_making_maps.html">Making maps using geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_nls_ogc.html">Accessing Data from NLS OGC api</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_spatial_analysis.html">Spatial data manipulation and analysis using R and geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_statfi_ogc.html">Accessing Data from Statistics Finland OGC api</a></li>
    <li><a class="dropdown-item" href="../articles/Publications-using-the-geofi-R-package.html">Publications using the geofi R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://ropengov.org"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/geofi"><span class="fa fab fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Geocode Finnish Place Names or Street Addresses</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/geofi/blob/master/R/geocode.R" class="external-link"><code>R/geocode.R</code></a></small>
      <div class="d-none name"><code>geocode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Geocodes Finnish place names or street addresses using the National Land Survey
of Finland (NLS) geocoding REST API. This function converts textual location
descriptions into spatial coordinates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geocode</span><span class="op">(</span></span>
<span>  <span class="va">search_string</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"interpolated-road-addresses"</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">3067</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"fi"</span>,</span>
<span>  size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"geofi_mml_api_key"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-search-string">search_string<a class="anchor" aria-label="anchor" href="#arg-search-string"></a></dt>
<dd><p>Character. The place name or street address to geocode
(e.g., <code>"Suomenlinna"</code> or <code>"Mannerheimintie 100, Helsinki"</code>).</p></dd>


<dt id="arg-source">source<a class="anchor" aria-label="anchor" href="#arg-source"></a></dt>
<dd><p>Character. The data source to search in. Must be one of:
<code>"interpolated-road-addresses"</code> (default), <code>"geographic-names"</code>,
<code>"addresses"</code>, <code>"mapsheets-tm35"</code>, or <code>"cadastral-units"</code>.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>Character. The coordinate reference system (CRS) for the
output data, specified as an EPSG code. Must be one of <code>"EPSG:3067"</code>
(ETRS-TM35FIN, default) or <code>"EPSG:4326"</code> (WGS84).</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>Character. The language for the API response labels. Must be one of
<code>"fi"</code> (Finnish, default), <code>"sv"</code> (Swedish), or <code>"en"</code> (English).</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>Numeric or NULL. The maximum number of results to return. Must be a
positive integer. If <code>NULL</code> (default), the API’s default size is used.</p></dd>


<dt id="arg-options">options<a class="anchor" aria-label="anchor" href="#arg-options"></a></dt>
<dd><p>Character or NULL. Additional options to pass to the API, specified
as a single string (e.g., <code>"focus.point.lat=60.1699&amp;focus.point.lon=24.9384"</code>).
If <code>NULL</code> (default), no additional options are included. See the NLS
geocoding API documentation for valid options.</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>Character. API key for authenticating with the NLS geocoding API.
Defaults to the value stored in <code>options(geofi_mml_api_key)</code>. You can
obtain an API key from the National Land Survey of Finland website (see
<a href="https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje" class="external-link">https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje</a>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>sf</code> object containing the geocoded locations as points in the
specified <code>crs</code>. If no results are found, a warning is issued, and
an empty <code>sf</code> object is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses the NLS geocoding REST API to convert place names or street
addresses into spatial coordinates. It supports multiple data sources, including
interpolated road addresses, geographic names, and cadastral units. The function
includes robust error handling:</p><ul><li><p>Retries failed requests up to 3 times for transient network issues.</p></li>
<li><p>Handles HTTP errors and rate limits (HTTP 429).</p></li>
<li><p>Validates inputs to prevent common errors.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="geocode_reverse.html">geocode_reverse</a></code> for reverse geocoding.
<a href="https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje" class="external-link">https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje</a> for
instructions on obtaining an API key.
<a href="https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/aineistot-ja-rajapinnat/paikkatietojen-rajapintapalvelut/geokoodauspalvelu" class="external-link">https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/aineistot-ja-rajapinnat/paikkatietojen-rajapintapalvelut/geokoodauspalvelu</a>
for more information on the NLS geocoding API.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Markus Kainu <a href="mailto:markus.kainu@kapsi.fi">markus.kainu@kapsi.fi</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set your API key</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>geofi_mml_api_key <span class="op">=</span> <span class="st">"your_api_key_here"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Geocode a place name</span></span></span>
<span class="r-in"><span><span class="va">locations</span> <span class="op">&lt;-</span> <span class="fu">geocode</span><span class="op">(</span>search_string <span class="op">=</span> <span class="st">"Suomenlinna"</span>, source <span class="op">=</span> <span class="st">"geographic-names"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">locations</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Geocode a street address with a custom size and output CRS</span></span></span>
<span class="r-in"><span><span class="va">addresses</span> <span class="op">&lt;-</span> <span class="fu">geocode</span><span class="op">(</span></span></span>
<span class="r-in"><span>  search_string <span class="op">=</span> <span class="st">"Mannerheimintie 100, Helsinki"</span>,</span></span>
<span class="r-in"><span>  source <span class="op">=</span> <span class="st">"addresses"</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="st">"EPSG:4326"</span>,</span></span>
<span class="r-in"><span>  size <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">addresses</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Kainu, Joona Lehtomaki, Leo Lahti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>



    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script></body></html>

