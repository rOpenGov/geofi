<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reverse Geocode Geographic Locations into Finnish Place Names or Addresses — geocode_reverse • geofi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reverse Geocode Geographic Locations into Finnish Place Names or Addresses — geocode_reverse"><meta name="description" content="Reverse geocodes geographic coordinates into Finnish place names or street
addresses using the National Land Survey of Finland (NLS) geocoding REST API.
This function converts spatial points into textual location descriptions."><meta property="og:description" content="Reverse geocodes geographic coordinates into Finnish place names or street
addresses using the National Land Survey of Finland (NLS) geocoding REST API.
This function converts spatial points into textual location descriptions."><meta property="og:image" content="https://ropengov.github.io/geofi/logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenGov"><meta name="twitter:site" content="@rOpenGov"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geofi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/geofi_datasets.html">Datasets in geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_geocoding.html">Geocoding and Reverse Geocoding with the geofi Package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_joining_attribute_data.html">Joining attribute data with geofi data</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_making_maps.html">Making maps using geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_nls_ogc.html">Accessing Spatial Data from NLS OGC apis with geofi</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_spatial_analysis.html">Spatial data manipulation and analysis using R and geofi-package</a></li>
    <li><a class="dropdown-item" href="../articles/geofi_statfi_ogc.html">Accessing Spatial and Population Data from Statistics Finland OGC api</a></li>
    <li><a class="dropdown-item" href="../articles/Publications-using-the-geofi-R-package.html">Publications using the geofi R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://ropengov.org"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/geofi"><span class="fa fab fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Reverse Geocode Geographic Locations into Finnish Place Names or Addresses</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/geofi/blob/master/R/geocode.R" class="external-link"><code>R/geocode.R</code></a></small>
      <div class="d-none name"><code>geocode_reverse.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reverse geocodes geographic coordinates into Finnish place names or street
addresses using the National Land Survey of Finland (NLS) geocoding REST API.
This function converts spatial points into textual location descriptions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geocode_reverse</span><span class="op">(</span></span>
<span>  <span class="va">point</span>,</span>
<span>  boundary_circle_radius <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  layers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sources <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return <span class="op">=</span> <span class="st">"sf"</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"geofi_mml_api_key"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-point">point<a class="anchor" aria-label="anchor" href="#arg-point"></a></dt>
<dd><p>An <code>sf</code> object with POINT geometries, representing the
locations to reverse geocode. The input must be in EPSG:4326 (WGS84) CRS.</p></dd>


<dt id="arg-boundary-circle-radius">boundary_circle_radius<a class="anchor" aria-label="anchor" href="#arg-boundary-circle-radius"></a></dt>
<dd><p>Numeric or NULL. The radius (in meters) of a
circular boundary around each point to limit the search area. Must be a
positive number. If <code>NULL</code> (default), no boundary radius is applied.</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>Numeric or NULL. The maximum number of results to return per point.
Must be a positive integer. If <code>NULL</code> (default), the API’s default size
is used.</p></dd>


<dt id="arg-layers">layers<a class="anchor" aria-label="anchor" href="#arg-layers"></a></dt>
<dd><p>Character or NULL. The layers to include in the search, specified
as a comma-separated string (e.g., <code>"address,poi"</code>). If <code>NULL</code>
(default), the API’s default layers are used. See the NLS geocoding API
documentation for valid layers.</p></dd>


<dt id="arg-sources">sources<a class="anchor" aria-label="anchor" href="#arg-sources"></a></dt>
<dd><p>Character or NULL. The data sources to search in, specified as a
comma-separated string (e.g., <code>"geographic-names,addresses"</code>). Must be
one or more of <code>"interpolated-road-addresses"</code>, <code>"geographic-names"</code>,
<code>"addresses"</code>, <code>"mapsheets-tm35"</code>, or <code>"cadastral-units"</code>.
If <code>NULL</code> (default), the API’s default sources are used.</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>Character. The format of the returned data. Must be one of
<code>"sf"</code> (default, returns an <code>sf</code> object) or <code>"json"</code> (returns
a list of raw JSON responses).</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>Character. API key for authenticating with the NLS geocoding API.
Defaults to the value stored in <code>options(geofi_mml_api_key)</code>. You can
obtain an API key from the National Land Survey of Finland website (see
<a href="https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje" class="external-link">https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje</a>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>return="sf"</code>, an <code>sf</code> object containing the reverse
geocoded locations as points in EPSG:4326 (WGS84) CRS. If <code>return="json"</code>,
a list of raw JSON responses from the API. If no results are found for a point,
a warning is issued, and that point may be omitted from the results.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses the NLS geocoding REST API to convert geographic coordinates
into place names or street addresses. It supports multiple points in a single
call and allows filtering by search radius, layers, sources, and country.
The function includes robust error handling:</p><ul><li><p>Retries failed requests up to 3 times for transient network issues.</p></li>
<li><p>Handles HTTP errors and rate limits (HTTP 429).</p></li>
<li><p>Validates inputs to prevent common errors.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="geocode.html">geocode</a></code> for forward geocoding.
<a href="https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje" class="external-link">https://www.maanmittauslaitos.fi/en/rajapinnat/api-avaimen-ohje</a> for
instructions on obtaining an API key.
<a href="https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/aineistot-ja-rajapinnat/paikkatietojen-rajapintapalvelut/geokoodauspalvelu" class="external-link">https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/aineistot-ja-rajapinnat/paikkatietojen-rajapintapalvelut/geokoodauspalvelu</a>
for more information on the NLS geocoding API.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Markus Kainu <a href="mailto:markus.kainu@kapsi.fi">markus.kainu@kapsi.fi</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set your API key</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>geofi_mml_api_key <span class="op">=</span> <span class="st">"your_api_key_here"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a point for Suomenlinna (in EPSG:4326)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reverse geocode to get place names</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">places</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reverse geocode with a search radius and return raw JSON</span></span></span>
<span class="r-in"><span><span class="va">places_json</span> <span class="op">&lt;-</span> <span class="fu">geocode_reverse</span><span class="op">(</span></span></span>
<span class="r-in"><span>  point <span class="op">=</span> <span class="va">suomenlinna</span>,</span></span>
<span class="r-in"><span>  boundary_circle_radius <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  return <span class="op">=</span> <span class="st">"json"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">places_json</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Kainu, Joona Lehtomaki, Leo Lahti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>



    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script></body></html>

